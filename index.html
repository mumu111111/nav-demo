<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的导航</title>
    <link rel="stylesheet" href="./css.css">
</head>
<body>
    <nav></nav>
    <main>
        <div id="main" class="wrapper"></div>
    </main>
    <footer></footer>
    <script>
            var  keys={
                '0': {0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
                '1':{0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
                '2':{0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
                length: 3
            }
            var hash ={
                'q': 'qq.com',
                'w': 'weibo.com',
                'e': 'ele.com',
                'r': 'renren.com',
                't': 'tianya.com',
                'y': 'youtube.com',
                'i': 'iciba.com',
                'j': 'jd.com'
            }
            // 覆盖hash ,获取最新的hash
            var hashInLocalStorage= JSON.parse(localStorage.getItem('zzz')|| null)
            if(hashInLocalStorage){
                hash=hashInLocalStorage
            }



            function tag(tagName){
                var element= document.createElement(tagName)
                return element; 
            }
            //  生成键盘：遍历keys, 生成kbd标签
            for(var index=0;index< keys['length'];index=index+1 ){
                var div= tag('div')
                div.className="row"
                main.appendChild(div)
                var row=keys[index]//keys中第一个 、 第二个、第三个数组
                
                for(var index2=0;index2<row['length'];index2=index2+1){

                    var kbd=tag('kbd')
                    kbd.className="key"
                    var span=tag('span')
                    span.textContent=row[index2]
                    span.className="text"
                    kbd.appendChild(span)
                    var img=tag('img')
                    if(hash[row[index2]]){
                        img.src='http://'+hash[row[index2]]+'/favicon.ico'
                    }
                    else{
                        img.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                    }
                    img.onerror= function(ddddd){
                        console.log(ddddd.target.src='//i.loli.net/2017/11/10/5a05afbc5e183.png')
                    }
                    
                    var button=tag('button')
                    button.textContent= "编辑"
                    button.id= row[index2]
                    button.onclick= function(ddfhgh){
                        //console.log(ddfhgh);
                        var button2=ddfhgh.target;
                        var img2=button2.previousSibling
                        var key=button2['id']
                        var x= prompt('给我一个网址')
                        hash[key]=x
                        img2.src='http://'+x+'/favicon.ico'
                        img2.onerror= function(ffffff){
                            ffffff.target.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                        }
                        localStorage.setItem('zzz',JSON.stringify(hash))
                    }
                
                    kbd.appendChild(img)
                    kbd.appendChild(button)
                    div.appendChild(kbd)
                }
            }

           
            // 用户点击 打开对应的网址
            document.onkeypress=function(djjfkf){
                // console.log(djjfkf)
                // console.log(djjfkf['key'])
               var key =djjfkf['key']
               var website= hash[key]
               window.open('http://'+website, '_blank')
            //    location.href='http://'+website
            }
        </script>  
</body>
</html>