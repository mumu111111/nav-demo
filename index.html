<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的导航</title>
    <link rel="stylesheet" href="./css.css">
</head>
<body>
    <nav></nav>
    <main>
        <div id="main" class="wrapper"></div>
    </main>
    <footer></footer>
    <script>
            var  keys={
                '0': {0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
                '1':{0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
                '2':{0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
                length: 3
            }
            var hash ={
                'q': 'qq.com',
                'w': 'weibo.com',
                'e': 'ele.com',
                'r': 'renren.com',
                't': 'tianya.com',
                'y': 'youtube.com',
                'i': 'iciba.com',
                'j': 'jd.com'
            }
            // 覆盖hash ,获取最新的hash
            var hashInLocalStorage= JSON.parse(localStorage.getItem('zzz')|| null)
            if(hashInLocalStorage){
                hash=hashInLocalStorage
            }
           //  遍历keys, 生成kbd标签
            index=0;
            while(index< keys.length){
                div1= document.createElement('div')
                div1.className="row"
                index2=0;
                shuzu=keys[index]
                while(index2<shuzu.length){
                    kbd=document.createElement('kbd')
                    div1.appendChild(kbd)
                    kbd.className="key"
                    span=document.createElement('span')
                    span.textContent=shuzu[index2]
                    span.className="text"
                    kbd.appendChild(span)
                    img=document.createElement('img')
                    if(hash[shuzu[index2]]){
                        img.src='http://'+hash[shuzu[index2]]+'/favicon.ico'
                    }
                    else{
                        img.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                    }
                    img.onerror= function(ddddd){
                        console.log(ddddd.target.src='//i.loli.net/2017/11/10/5a05afbc5e183.png')
                    }
                    kbd.appendChild(img)
                    btn=document.createElement('button')
                    btn.textContent= "编辑"
                    kbd.appendChild(btn)
                    btn.id= shuzu[index2]
                    btn.onclick= function(ddfhgh){
                        console.log(ddfhgh);
                        button2=ddfhgh.target;
                        key=button2['id']
                        x= prompt('给我一个网址')
                        hash[key]=x
                        img2=button2.previousSibling
                        img2.src='http://'+x+'/favicon.ico'
                        img2.onerror= function(ffffff){
                            ffffff.target.src='//i.loli.net/2017/11/10/5a05afbc5e183.png'
                        }
                        localStorage.setItem('zzz',JSON.stringify(hash))
                    }
                    main.appendChild(div1);
                    index2= index2+1;
                }
                index= index+1;
            }
            // 用户点击 打开对应的网址
            document.onkeypress=function(djjfkf){
                // console.log(djjfkf)
                // console.log(djjfkf['key'])
               key =djjfkf['key']
               website= hash[key]
               window.open('http://'+website, '_blank')
            //    location.href='http://'+website
            }
        </script>  
</body>
</html>